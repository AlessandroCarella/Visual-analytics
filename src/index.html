<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Visual Analytics Project</title>
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <link rel="stylesheet" href="styles/layout.css" />
        <link rel="stylesheet" href="styles/intro.css" />
        <link rel="stylesheet" href="styles/buttons.css" />
        <link rel="stylesheet" href="styles/inputs.css" />
        <link rel="stylesheet" href="styles/guide.css" />
        <link rel="stylesheet" href="styles/slider.css" />
        <link rel="stylesheet" href="styles/contextMenu.css" />
        <link rel="stylesheet" href="styles/report.css" />
        <style>
            /* Additional styles for radio buttons and labels */
            .radio-group {
                margin-bottom: 10px;
            }

            .radio-group label {
                margin-right: 10px;
            }
        </style>
    </head>
    <body>
        <!-- Introduction Section -->
        <div class="intro-wrapper">
            <button class="show-report-button">Show Report</button>

            <div class="intro-section">
                <h1>Visual Analytics: Illegal Fishing Investigation Tool</h1>
                
                <div class="intro-box">
                    <h2>Background</h2>
                    <p>
                        <strong>FishEye International</strong> is dedicated to combating illegal, unreported, and unregulated (IUU) fishing 
                        and protecting marine species impacted by it. They gather online news articles about fishing, the marine industry, 
                        and international maritime trade. Using a natural language processing tool, FishEye extracts entities (people and 
                        businesses) and their relationships from these articles to create a knowledge graph. Analysts use this graph to 
                        investigate tips about possible IUU activities.
                    </p>
                </div>

                <div class="intro-box">
                    <h2>The Challenge</h2>
                    <p>
                        This project addresses <strong>Mini-Challenge 1</strong> from the <strong>VAST Challenge 2023</strong>. FishEye needs to 
                        quickly understand and explore the context around each tip to connect identified entities to illegal fishing activities 
                        and advance their investigations. They have included their own case studies in the database, making it possible for 
                        related organizations and companies to appear in the graph.
                    </p>
                    <p>
                        The challenge is to develop a visual analytics tool that helps analysts see, interact with, and understand the relevant 
                        context around a tip without being overwhelmed by unnecessary information.
                    </p>
                </div>

                <div class="intro-box">
                    <h2>Entities Under Investigation</h2>
                    <p>
                        This visualization focuses on four entities identified in tips received by FishEye:
                    </p>
                    <ul>
                        <li><strong>Mar de la Vida OJSC</strong></li>
                        <li><strong>979893388</strong></li>
                        <li><strong>Oceanfront Oasis Inc Carrie</strong></li>
                        <li><strong>8327</strong></li>
                    </ul>
                    <p>
                        Not all of these entities will necessarily have a substantive connection to illegal fishing. The visualizations developed 
                        allow analysts to extend the information they see as new entities are discovered.
                    </p>
                </div>

                <div class="intro-box">
                    <h2>About This Tool</h2>
                    <p>
                        This interactive visualization provides a comprehensive set of tools to navigate and explore the knowledge graph data. 
                        The tool enables users to:
                    </p>
                    <ul>
                        <li>Investigate relationships between entities at various link distances</li>
                        <li>Filter connections by type (ownership, partnership, family relationship, membership)</li>
                        <li>Highlight specific nodes and their immediate connections</li>
                        <li>Expand nodes to reveal their sources, targets, or both</li>
                        <li>Adjust opacity to focus on relevant information</li>
                    </ul>
                    <p>
                        <strong>Key Pattern Identified:</strong> The analysis reveals that entities potentially involved in illegal fishing 
                        typically exhibit clusters of highly interconnected nodes, with entities having a high number of incoming and outgoing 
                        links connected to these clusters.
                    </p>
                </div>

                <div class="intro-cta">
                    <h3>Interactive Visualization Below</h3>
                    <p>Use the controls on the left panel to explore the network and uncover potential illegal fishing connections</p>
                </div>
            </div>
        </div>

        <!-- Interactive Visualization Section -->
        <div class="main-content">
        <div class="command-column">
            <div class="distance">
                <h3>
                    Investigate number of links distance from nodes to
                    investigate
                </h3>

                <label for="investigate-select"
                    >Select entity to investigate: (defaults to All)</label
                >
                <select id="investigate-select"></select>

                <h3>As source (up to 7 in link distance)</h3>
                <div class="investigate-distance-div">
                    <button id="decrease-source" class="minus-button">-</button>
                    <input
                        type="number"
                        id="sourceNumberInput"
                        min="-1"
                        max="7"
                        value="-1"
                        class="investigate-source-or-target-distance-select"
                    />
                    <button id="increase-source" class="plus-button">+</button>
                </div>

                <h3>As target (up to 6 in link distance)</h3>

                <div class="investigate-distance-div">
                    <button id="decrease-target" class="minus-button">-</button>
                    <input
                        type="number"
                        id="targetNumberInput"
                        min="-1"
                        max="6"
                        value="-1"
                        class="investigate-source-or-target-distance-select"
                    />
                    <button id="increase-target" class="plus-button">+</button>
                </div>

                <h3>As both (up to 7 in link distance)</h3>
                <div class="investigate-distance-div">
                    <button id="decrease-both" class="minus-button">-</button>
                    <input
                        type="number"
                        id="bothNumberInput"
                        min="-1"
                        max="7"
                        value="-1"
                        class="investigate-source-or-target-distance-select"
                    />
                    <button id="increase-both" class="plus-button">+</button>
                </div>
            </div>

            <div>
                <h3>
                    Choose which type of links to display by clicking the
                    buttons
                </h3>

                <button
                    id="ownership"
                    class="button ownershipButton active-button"
                >
                    Ownership
                </button>

                <button
                    id="partnership"
                    class="button partnershipButton active-button"
                >
                    Partnership
                </button>

                <button
                    id="family_relationship"
                    class="button family_relationshipButton active-button"
                >
                    Family relationship
                </button>

                <button
                    id="membership"
                    class="button membershipButton active-button"
                >
                    Membership
                </button>
            </div>

            <div class="slider-container">
                <h3>
                    Choose the opacity at which the irrelevant nodes and links
                    will be displayed
                </h3>
                <input
                    type="range"
                    id="opacity-slider"
                    min="0"
                    max="100"
                    value="10"
                    step="10"
                />
                <span id="opacity-value">10</span>
            </div>

            <div class="source-and-target-select">
                <h3>
                    Select a node to investigate its connections as a source or
                    as a target
                </h3>

                <label for="source-select"
                    >Select Source and see its targets:</label
                >
                <select id="source-select">
                    <option value=""></option>
                </select>

                <label for="target-select"
                    >Select Target and see its sources:</label
                >
                <select id="target-select">
                    <option value=""></option>
                </select>
            </div>
        </div>

        <div class="graph">
            <svg></svg>
            <button class="show-guide-button">Show Map Legend</button>
        </div>

        <div class="guide-column">
            <button class="hide-guide-button">Hide Map Legend</button>
            <h3>Guide</h3>
            <div class="guide-content">
                <div class="links-colors">
                    <h3>Types of nodes:</h3>
                    <div class="color-section" id="links-colors-section"></div>
                </div>
                <br />
                <div class="nodes-colors">
                    <h3>Nodes colors</h3>
                    <div class="color-section" id="nodes-colors-section"></div>
                </div>
                <br />
                <div class="legend-text">
                    <h3>Additional Information</h3>
                    <h4>Black connection between nodes:</h4>
                    <p>
                        There is a thin black line that links the entities under
                        investigation between each other.
                        <br />
                        This connection is not present in the original dataset;
                        it is included to highlight potentially significant
                        relationships between these entities.
                    </p>
                    <h4>Click on nodes</h4>
                    <h5>Left click:</h5>
                    <p>
                        The left click on a node will highlight the nodes and
                        the links that are connected to it. You can adjust the
                        opacity of the irrelevant nodes and links using the tool
                        labeled "Choose the opacity at which the irrelevant
                        nodes and links will be displayed".
                    </p>
                    <h5>Right click:</h5>
                    <p>
                        The right click opens a custom context menu that shows
                        the 3 possible options:
                        <br />
                        - Expand as source <br />
                        - Expand as target <br />
                        - Expand as both
                    </p>
                </div>
            </div>
        </div>

        <!-- Report Panel -->
        <div class="report-panel">
            <button class="hide-report-button">Hide Report</button>
            <h3>Visual Analytics Report</h3>
            <div class="report-content">
                <iframe src="Visual_analytics.pdf" class="pdf-viewer"></iframe>
            </div>
        </div>

        <div id="context-menu" class="context-menu">
            <div class="context-menu__item" data-option="source">
                Expand as source
            </div>
            <div class="context-menu__item" data-option="target">
                Expand as target
            </div>
            <div class="context-menu__item" data-option="both">
                Expand as both
            </div>
        </div>

        </div>
        
        <script src="index.js"></script>
        <script>
            // Report panel toggle functionality
            document.addEventListener('DOMContentLoaded', function() {
                const showReportButton = document.querySelector('.show-report-button');
                const hideReportButton = document.querySelector('.hide-report-button');
                const reportPanel = document.querySelector('.report-panel');

                showReportButton.addEventListener('click', function() {
                    reportPanel.style.display = 'block';
                    showReportButton.style.display = 'none';
                });

                hideReportButton.addEventListener('click', function() {
                    reportPanel.style.display = 'none';
                    showReportButton.style.display = 'block';
                });
            });
        </script>
    </body>
</html>