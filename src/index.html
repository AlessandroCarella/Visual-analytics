<!-- <!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>D3.js Visualization</title>
		<script src="https://d3js.org/d3.v7.min.js"></script>
		<link rel="stylesheet" href="styles.css" />
		<style>
			/* Additional styles for radio buttons and labels */
			.radio-group {
				margin-bottom: 10px;
			}

			.radio-group label {
				margin-right: 10px;
			}
		</style>
	</head>
	<body>
		<div class="command-column">
			<h2>Commands</h2>

			<div>
				<button
					id="ownership"
					class="button ownershipButton active-button"
				>
					ownership
				</button>

				<button
					id="partnership"
					class="button partnershipButton active-button"
				>
					partnership
				</button>

				<button
					id="family_relationship"
					class="button family_relationshipButton active-button"
				>
					family relationship
				</button>

				<button
					id="membership"
					class="button membershipButton active-button"
				>
					membership
				</button>
			</div>

			<div>
				<label for="source-select"
					>Select Source and see its targets:</label
				>
				<select id="source-select">
					<option value=""></option>
				</select>

				<label for="target-select"
					>Select Target and see its sources:</label
				>
				<select id="target-select">
					<option value=""></option>
				</select>
			</div>

			<div>
				<h2>Investigate distance from nodes to investigate</h2>

				<label for="investigate-select"
					>Select enity to investigate:</label
				>
				<select id="investigate-select"></select>

				<h3>As source</h3>
				<div class="investigate-distance-div">
					<button id="decrease-source" class="minus-button">-</button>
					<input
						type="number"
						id="sourceNumberInput"
						min="-1"
						max="7"
						value="-1"
						class="investigate-source-or-target-distance-select"
					/>
					<button id="increase-source" class="plus-button">+</button>
				</div>

				<h3>As target</h3>

				<div class="investigate-distance-div">
					<button id="decrease-target" class="minus-button">-</button>
					<input
						type="number"
						id="targetNumberInput"
						min="-1"
						max="6"
						value="-1"
						class="investigate-source-or-target-distance-select"
					/>
					<button id="increase-target" class="plus-button">+</button>
				</div>

				<h3>As both</h3>
				<div class="investigate-distance-div">
					<button id="decrease-both" class="minus-button">-</button>
					<input
						type="number"
						id="bothNumberInput"
						min="-1"
						max="7"
						value="-1"
						class="investigate-source-or-target-distance-select"
					/>
					<button id="increase-both" class="plus-button">+</button>
				</div>
			</div>
		</div>

		<div class="graph">
			<svg></svg>
			<button class="show-guide-button">Show guide</button>
		</div>
		
		<div class="guide-column">
			<button class="hide-guide-button">Hide guide</button>
			<h2>Guide</h2>
			<div class="guide-content">
				<div class="links-colors">
					<h3>Links colors</h3>
					<div class="color-section" id="links-colors-section"></div>
				</div>
				<br>
				<div class="nodes-colors">
					<h3>Nodes colors</h3>
					<div class="color-section" id="nodes-colors-section"></div>
				</div>
			</div>
		</div>

		<div id="context-menu" class="context-menu">
			<div class="context-menu__item" data-option="source">As source</div>
			<div class="context-menu__item" data-option="target">As target</div>
			<div class="context-menu__item" data-option="both">Both</div>
		</div>

		<script src="index.js"></script>
	</body>
</html>
 -->
<!DOCTYPE html>
<meta charset="utf-8" />
<title>Force-Directed Graph</title>
<style>
	.node {
		cursor: pointer;
		stroke: #3182bd;
		stroke-width: 1.5px;
	}

	.link {
		fill: none;
		stroke: #9ecae1;
		stroke-width: 1.5px;
	}
</style>
<body>
	<script src="//d3js.org/d3.v3.min.js"></script>
	<script>
		var width = 960,
			height = 500,
			root;

		var force = d3.layout.force().size([width, height]).on("tick", tick);

		var svg = d3
			.select("body")
			.append("svg")
			.attr("width", width)
			.attr("height", height);

		var link = svg.selectAll(".link"),
			node = svg.selectAll(".node");

		d3.json("readme.json", function (error, json) {
			if (error) throw error;

			root = json;
			update();
		});

		function update() {
			var nodes = flatten(root),
				links = d3.layout.tree().links(nodes);

			// Restart the force layout.
			force.nodes(nodes).links(links).start();

			// Update the links…
			link = link.data(links, function (d) {
				return d.target.id;
			});

			// Exit any old links.
			link.exit().remove();

			// Enter any new links.
			link.enter()
				.insert("line", ".node")
				.attr("class", "link")
				.attr("x1", function (d) {
					return d.source.x;
				})
				.attr("y1", function (d) {
					return d.source.y;
				})
				.attr("x2", function (d) {
					return d.target.x;
				})
				.attr("y2", function (d) {
					return d.target.y;
				});

			// Update the nodes…
			node = node
				.data(nodes, function (d) {
					return d.id;
				})
				.style("fill", color);

			// Exit any old nodes.
			node.exit().remove();

			// Enter any new nodes.
			node.enter()
				.append("circle")
				.attr("class", "node")
				.attr("cx", function (d) {
					return d.x;
				})
				.attr("cy", function (d) {
					return d.y;
				})
				.attr("r", function (d) {
					return Math.sqrt(d.size) / 10 || 4.5;
				})
				.style("fill", color)
				.on("click", click)
				.call(force.drag);
		}

		function tick() {
			link.attr("x1", function (d) {
				return d.source.x;
			})
				.attr("y1", function (d) {
					return d.source.y;
				})
				.attr("x2", function (d) {
					return d.target.x;
				})
				.attr("y2", function (d) {
					return d.target.y;
				});

			node.attr("cx", function (d) {
				return d.x;
			}).attr("cy", function (d) {
				return d.y;
			});
		}

		// Color leaf nodes orange, and packages white or blue.
		function color(d) {
			return d._children ? "#3182bd" : d.children ? "#c6dbef" : "#fd8d3c";
		}

		// Toggle children on click.
		function click(d) {
			if (!d3.event.defaultPrevented) {
				if (d.children) {
					d._children = d.children;
					d.children = null;
				} else {
					d.children = d._children;
					d._children = null;
				}
				update();
			}
		}

		// Returns a list of all nodes under the root.
		function flatten(root) {
			var nodes = [],
				i = 0;

			function recurse(node) {
				if (node.children) node.children.forEach(recurse);
				if (!node.id) node.id = ++i;
				nodes.push(node);
			}

			recurse(root);
			return nodes;
		}
	</script>
</body>
